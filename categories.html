---
layout: default
title: 分类与标签
permalink: /categories/
---
<div class="w-full">
  
  <!-- 页面标题 -->
  <header class="mb-12 text-center">
    <h1 class="font-display font-bold text-5xl md:text-6xl text-white mb-6">
      <span class="bg-clip-text text-transparent bg-gradient-to-r from-tech-cyan via-tech-purple to-tech-cyan">
        分类与标签
      </span>
    </h1>
    <p class="text-xl text-gray-400">探索不同主题的技术文章</p>
  </header>

  <!-- 搜索栏 -->
  <div class="mb-12">
    <div class="max-w-2xl mx-auto relative">
      <input type="text" 
             id="filter-input"
             placeholder="搜索分类、标签或文章..." 
             class="w-full px-6 py-4 pl-12 bg-white/5 border border-white/10 rounded-2xl text-white placeholder-gray-500 focus:outline-none focus:border-tech-cyan/50 focus:bg-white/10 transition-all duration-300"
             onkeyup="filterContent()">
      <svg class="w-5 h-5 text-gray-500 absolute left-4 top-1/2 -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
      </svg>
    </div>
  </div>

  <!-- 标签切换 -->
  <div class="flex justify-center mb-12 space-x-4">
    <button onclick="showTab('categories')" 
            id="categories-tab"
            class="tab-btn active px-8 py-3 rounded-xl font-semibold transition-all duration-300">
      <span class="flex items-center space-x-2">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
        </svg>
        <span>分类</span>
      </span>
    </button>
    <button onclick="showTab('tags')" 
            id="tags-tab"
            class="tab-btn px-8 py-3 rounded-xl font-semibold transition-all duration-300">
      <span class="flex items-center space-x-2">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"/>
        </svg>
        <span>标签</span>
      </span>
    </button>
    <button onclick="showTab('all')" 
            id="all-tab"
            class="tab-btn px-8 py-3 rounded-xl font-semibold transition-all duration-300">
      <span class="flex items-center space-x-2">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"/>
        </svg>
        <span>全部文章</span>
      </span>
    </button>
  </div>

  <!-- 分类视图 -->
  <div id="categories-view" class="tab-content">
    {%- assign categories = site.categories | sort -%}
    {%- if categories.size > 0 -%}
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {%- for category in categories -%}
      <div class="category-card group relative bg-white/5 backdrop-blur-sm rounded-2xl border border-white/10 hover:border-tech-cyan/50 transition-all duration-500 overflow-hidden hover:shadow-2xl hover:shadow-tech-cyan/10 hover:-translate-y-2"
           data-category="{{ category[0] | downcase }}">
        
        <!-- 背景渐变效果 -->
        <div class="absolute inset-0 bg-gradient-to-br from-tech-cyan/0 to-tech-purple/0 group-hover:from-tech-cyan/5 group-hover:to-tech-purple/5 transition-all duration-500"></div>
        
        <div class="relative p-6">
          <div class="flex items-start justify-between mb-4">
            <div class="flex-1">
              <h3 class="font-display font-bold text-2xl text-white group-hover:text-tech-cyan transition-colors mb-2">
                {{ category[0] }}
              </h3>
              <p class="text-gray-400 text-sm">{{ category[1].size }} 篇文章</p>
            </div>
            <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-tech-cyan/20 to-tech-purple/20 flex items-center justify-center group-hover:scale-110 transition-transform duration-300">
              <svg class="w-6 h-6 text-tech-cyan" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
              </svg>
            </div>
          </div>
          
          <div class="space-y-2">
            {%- for post in category[1] limit:3 -%}
            <a href="{{ post.url | relative_url }}" 
               class="block text-sm text-gray-400 hover:text-tech-cyan transition-colors truncate">
              • {{ post.title }}
            </a>
            {%- endfor -%}
            {%- if category[1].size > 3 -%}
            <button onclick="showCategoryPosts('{{ category[0] }}')" 
                    class="text-sm text-tech-cyan hover:text-tech-purple transition-colors font-medium">
              查看全部 {{ category[1].size }} 篇 →
            </button>
            {%- endif -%}
          </div>
        </div>
        
        <div class="absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-tech-cyan via-tech-purple to-tech-cyan transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500"></div>
      </div>
      {%- endfor -%}
    </div>
    {%- else -%}
    <p class="text-center text-gray-500 py-12">暂无分类</p>
    {%- endif -%}
  </div>

  <!-- 标签视图 -->
  <div id="tags-view" class="tab-content hidden">
    {%- assign tags = site.tags | sort -%}
    {%- if tags.size > 0 -%}
    <div class="flex flex-wrap gap-3">
      {%- for tag in tags -%}
      <button onclick="showTagPosts('{{ tag[0] }}')"
              data-tag="{{ tag[0] | downcase }}"
              class="tag-card group px-6 py-3 bg-white/5 hover:bg-gradient-to-r hover:from-tech-cyan/20 hover:to-tech-purple/20 border border-white/10 hover:border-tech-cyan/50 rounded-full transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-tech-cyan/20">
        <span class="flex items-center space-x-2">
          <svg class="w-4 h-4 text-tech-cyan" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"/>
          </svg>
          <span class="font-medium text-white group-hover:text-tech-cyan transition-colors">{{ tag[0] }}</span>
          <span class="px-2 py-0.5 bg-tech-cyan/20 text-tech-cyan text-xs rounded-full">{{ tag[1].size }}</span>
        </span>
      </button>
      {%- endfor -%}
    </div>
    {%- else -%}
    <p class="text-center text-gray-500 py-12">暂无标签</p>
    {%- endif -%}
  </div>

  <!-- 全部文章视图 -->
  <div id="all-view" class="tab-content hidden">
    {%- if site.posts.size > 0 -%}
    <div class="space-y-4">
      {%- for post in site.posts -%}
      <article class="post-card group relative bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 hover:border-tech-cyan/50 transition-all duration-300 overflow-hidden hover:shadow-xl hover:shadow-tech-cyan/10"
               data-title="{{ post.title | downcase }}"
               data-categories="{% for cat in post.categories %}{{ cat | downcase }} {% endfor %}"
               data-tags="{% for tag in post.tags %}{{ tag | downcase }} {% endfor %}">
        
        <div class="absolute inset-0 bg-gradient-to-r from-tech-cyan/0 to-tech-purple/0 group-hover:from-tech-cyan/5 group-hover:to-tech-purple/5 transition-all duration-500"></div>
        
        <div class="relative p-6 flex items-center space-x-6">
          <div class="flex-shrink-0 w-20 h-20 rounded-xl bg-gradient-to-br from-tech-cyan/20 to-tech-purple/20 flex items-center justify-center">
            <svg class="w-10 h-10 text-tech-cyan" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
            </svg>
          </div>
          
          <div class="flex-1 min-w-0">
            <a href="{{ post.url | relative_url }}" class="block group/link">
              <h3 class="font-display font-bold text-xl text-white group-hover/link:text-tech-cyan transition-colors mb-2 truncate">
                {{ post.title }}
              </h3>
            </a>
            
            <div class="flex flex-wrap items-center gap-3 text-sm">
              <time class="text-gray-500 flex items-center space-x-1">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                </svg>
                <span>{{ post.date | date: "%Y-%m-%d" }}</span>
              </time>
              
              {%- if post.categories.size > 0 -%}
              <span class="px-3 py-1 bg-tech-purple/20 text-tech-purple text-xs rounded-full font-medium">
                {{ post.categories | first }}
              </span>
              {%- endif -%}
              
              {%- if post.tags.size > 0 -%}
              {%- for tag in post.tags limit:2 -%}
              <span class="px-2 py-1 bg-white/5 text-gray-400 text-xs rounded border border-white/10">
                #{{ tag }}
              </span>
              {%- endfor -%}
              {%- endif -%}
            </div>
          </div>
          
          <div class="flex-shrink-0">
            <svg class="w-6 h-6 text-gray-600 group-hover:text-tech-cyan group-hover:translate-x-1 transition-all" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
          </div>
        </div>
      </article>
      {%- endfor -%}
    </div>
    {%- else -%}
    <p class="text-center text-gray-500 py-12">暂无文章</p>
    {%- endif -%}
  </div>

  <!-- 空状态提示 -->
  <div id="empty-state" class="hidden text-center py-20">
    <div class="w-24 h-24 mx-auto mb-6 rounded-full bg-white/5 flex items-center justify-center">
      <svg class="w-12 h-12 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
      </svg>
    </div>
    <p class="text-gray-500 text-lg">没有找到匹配的内容</p>
    <p class="text-gray-600 text-sm mt-2">试试其他关键词</p>
  </div>

</div>

<!-- 文章列表弹窗 -->
<div id="posts-modal" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
  <div class="w-full max-w-4xl bg-tech-dark rounded-2xl border border-white/10 shadow-2xl max-h-[80vh] overflow-hidden flex flex-col animate-scale-in">
    
    <div class="flex items-center justify-between p-6 border-b border-white/10">
      <h3 id="modal-title" class="font-display font-bold text-2xl text-white"></h3>
      <button onclick="closeModal()" class="text-gray-400 hover:text-white transition-colors">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>
    
    <div id="modal-content" class="p-6 overflow-y-auto flex-1 space-y-3">
      <!-- 动态内容 -->
    </div>
  </div>
</div>

<!-- JavaScript -->
<script>
  // 存储所有文章数据
  const allPosts = [
    {%- for post in site.posts -%}
    {
      url: "{{ post.url | relative_url }}",
      title: {{ post.title | jsonify }},
      date: "{{ post.date | date: '%Y-%m-%d' }}",
      categories: {{ post.categories | jsonify }},
      tags: {{ post.tags | jsonify }}
    }{%- unless forloop.last -%},{%- endunless -%}
    {%- endfor -%}
  ];
  
  // 切换标签
  function showTab(tabName) {
    // 更新按钮状态
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.classList.remove('active');
    });
    document.getElementById(tabName + '-tab').classList.add('active');
    
    // 更新内容显示
    document.querySelectorAll('.tab-content').forEach(content => {
      content.classList.add('hidden');
    });
    document.getElementById(tabName + '-view').classList.remove('hidden');
    
    // 清空搜索
    document.getElementById('filter-input').value = '';
    filterContent();
  }
  
  // 过滤内容
  function filterContent() {
    const filterValue = document.getElementById('filter-input').value.toLowerCase();
    
    // 获取当前激活的视图
    const activeView = document.querySelector('.tab-content:not(.hidden)');
    if (!activeView) return;
    
    let hasResults = false;
    
    // 过滤分类卡片
    const categoryCards = activeView.querySelectorAll('.category-card');
    categoryCards.forEach(card => {
      const category = card.dataset.category || '';
      if (category.includes(filterValue)) {
        card.style.display = '';
        hasResults = true;
      } else {
        card.style.display = 'none';
      }
    });
    
    // 过滤标签卡片
    const tagCards = activeView.querySelectorAll('.tag-card');
    tagCards.forEach(card => {
      const tag = card.dataset.tag || '';
      if (tag.includes(filterValue)) {
        card.style.display = '';
        hasResults = true;
      } else {
        card.style.display = 'none';
      }
    });
    
    // 过滤文章卡片
    const postCards = activeView.querySelectorAll('.post-card');
    postCards.forEach(card => {
      const title = card.dataset.title || '';
      const categories = card.dataset.categories || '';
      const tags = card.dataset.tags || '';
      
      if (title.includes(filterValue) || categories.includes(filterValue) || tags.includes(filterValue)) {
        card.style.display = '';
        hasResults = true;
      } else {
        card.style.display = 'none';
      }
    });
    
    // 显示/隐藏空状态
    const emptyState = document.getElementById('empty-state');
    if (!hasResults && filterValue !== '') {
      emptyState.classList.remove('hidden');
    } else {
      emptyState.classList.add('hidden');
    }
  }
  
  // 显示分类下的所有文章
  function showCategoryPosts(category) {
    const categoryPosts = allPosts.filter(post => 
      post.categories && post.categories.includes(category)
    );
    
    document.getElementById('modal-title').textContent = category + ' (' + categoryPosts.length + ' 篇文章)';
    
    let content = '';
    categoryPosts.forEach(post => {
      content += `
        <a href="${post.url}" class="block p-4 bg-white/5 hover:bg-white/10 rounded-xl border border-white/10 hover:border-tech-cyan/50 transition-all duration-300 group">
          <h4 class="font-semibold text-white group-hover:text-tech-cyan transition-colors mb-2">${post.title}</h4>
          <p class="text-sm text-gray-500">${post.date}</p>
        </a>
      `;
    });
    
    document.getElementById('modal-content').innerHTML = content;
    document.getElementById('posts-modal').classList.remove('hidden');
    document.getElementById('posts-modal').classList.add('flex');
    document.body.style.overflow = 'hidden';
  }
  
  // 显示标签下的所有文章
  function showTagPosts(tag) {
    const tagPosts = allPosts.filter(post => 
      post.tags && post.tags.includes(tag)
    );
    
    document.getElementById('modal-title').textContent = '#' + tag + ' (' + tagPosts.length + ' 篇文章)';
    
    let content = '';
    tagPosts.forEach(post => {
      content += `
        <a href="${post.url}" class="block p-4 bg-white/5 hover:bg-white/10 rounded-xl border border-white/10 hover:border-tech-cyan/50 transition-all duration-300 group">
          <h4 class="font-semibold text-white group-hover:text-tech-cyan transition-colors mb-2">${post.title}</h4>
          <p class="text-sm text-gray-500">${post.date}</p>
        </a>
      `;
    });
    
    document.getElementById('modal-content').innerHTML = content;
    document.getElementById('posts-modal').classList.remove('hidden');
    document.getElementById('posts-modal').classList.add('flex');
    document.body.style.overflow = 'hidden';
  }
  
  // 关闭弹窗
  function closeModal() {
    document.getElementById('posts-modal').classList.add('hidden');
    document.getElementById('posts-modal').classList.remove('flex');
    document.body.style.overflow = '';
  }
  
  // 点击遮罩关闭
  document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('posts-modal')?.addEventListener('click', function(e) {
      if (e.target === this) {
        closeModal();
      }
    });
    
    // ESC 键关闭
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeModal();
      }
    });
  });
</script>

<!-- 样式 -->
<style>
  .tab-btn {
    background: rgba(255, 255, 255, 0.05);
    color: #9ca3af;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  .tab-btn.active {
    background: linear-gradient(to right, #06b6d4, #8b5cf6);
    color: white;
    border-color: transparent;
    box-shadow: 0 4px 16px rgba(6, 182, 212, 0.3);
  }
  
  @keyframes scale-in {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }
  
  .animate-scale-in {
    animation: scale-in 0.2s ease-out;
  }
</style>
